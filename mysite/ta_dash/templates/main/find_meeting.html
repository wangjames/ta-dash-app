<input id="address"></input>
<select id="option-menu">
  <option value="cafes">cafes</option>
  <option value="libraries">libraries</option>
</select>
<button onclick="load_info()">Get Suggestions</button>
<div id="suggestions"></div>

<script>
    
    function load_info(){
        var address = document.getElementById('address').value
        var option_menu = document.getElementById("option-menu");
        var option = option_menu.options[option_menu.selectedIndex].text;
        var url = "/main/getsuggest/";
        var payload = {"address": address, "categories": option}
        getSuggestions(url, payload);
        
    }
    function getSuggestions(url, payload) {
        var xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
             var responseText = JSON.parse(this.responseText);
             var business_array = responseText["businesses"]
             var businesses = business_array.map(function(element)
             {
               let name = element["name"]
               let address = element["location"]["display_address"]
               return {"name":name, "address":address}
             })
             document.getElementById("suggestions").innerHTML = JSON.stringify(businesses);
            }
          };
          url += "?address=" + payload.address + "&category=" + payload.categories;
          console.log(url)
          xhttp.open("GET", url, true);
          xhttp.send();
    }
</script>

